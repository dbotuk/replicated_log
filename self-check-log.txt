(base) denisbotuk@MacBookPro Homework % docker-compose up --build
[+] Building 1.6s (23/23) FINISHED                                                                                                                             
 => [internal] load local bake definitions                                                                                                                0.0s
 => => reading from stdin 1.62kB                                                                                                                          0.0s
 => [follower-1 internal] load build definition from Dockerfile                                                                                           0.0s
 => => transferring dockerfile: 280B                                                                                                                      0.0s
 => WARN: ConsistentInstructionCasing: Command 'from' should match the case of the command majority (uppercase) (line 1)                                  0.0s
 => WARN: ConsistentInstructionCasing: Command 'from' should match the case of the command majority (uppercase) (line 1)                                  0.0s
 => [master internal] load build definition from Dockerfile                                                                                               0.0s
 => => transferring dockerfile: 252B                                                                                                                      0.0s
 => WARN: ConsistentInstructionCasing: Command 'from' should match the case of the command majority (uppercase) (line 1)                                  0.0s
 => [follower-2 internal] load metadata for docker.io/library/python:3.11-slim                                                                            1.2s
 => [follower-1 internal] load .dockerignore                                                                                                              0.0s
 => => transferring context: 2B                                                                                                                           0.0s
 => [master 1/6] FROM docker.io/library/python:3.11-slim@sha256:193fdd0bbcb3d2ae612bd6cc3548d2f7c78d65b549fcaa8af75624c47474444d                          0.0s
 => => resolve docker.io/library/python:3.11-slim@sha256:193fdd0bbcb3d2ae612bd6cc3548d2f7c78d65b549fcaa8af75624c47474444d                                 0.0s
 => [master internal] load build context                                                                                                                  0.0s
 => => transferring context: 11.24kB                                                                                                                      0.0s
 => [follower-1 internal] load build context                                                                                                              0.0s
 => => transferring context: 4.44kB                                                                                                                       0.0s
 => CACHED [follower-1 2/6] WORKDIR /app                                                                                                                  0.0s
 => CACHED [follower-1 3/6] COPY requirements.txt ./requirements.txt                                                                                      0.0s
 => CACHED [follower-1 4/6] RUN pip install -r requirements.txt                                                                                           0.0s
 => CACHED [follower-1 5/6] COPY api/base.py ./base.py                                                                                                    0.0s
 => CACHED [follower-1 6/6] COPY api/follower/ ./                                                                                                         0.0s
 => CACHED [master 3/6] COPY requirements.txt ./requirements.txt                                                                                          0.0s
 => CACHED [master 4/6] RUN pip install -r requirements.txt                                                                                               0.0s
 => CACHED [master 5/6] COPY api/base.py ./base.py                                                                                                        0.0s
 => CACHED [master 6/6] COPY api/master/ ./                                                                                                               0.0s
 => [follower-1] exporting to image                                                                                                                       0.1s
 => => exporting layers                                                                                                                                   0.0s
 => => exporting manifest sha256:411c9de741934088fae19b6164def235a0aa4363519ccdf887612d5f9003e1ed                                                         0.0s
 => => exporting config sha256:baf83b214722ff6df7597fdc4adb405f56b4f1e7ce543d6b41470eae0258d328                                                           0.0s
 => => exporting attestation manifest sha256:eb860f9534b14b4cf4e8248d67f2c5c14d401fe715dc1ab755550848dacd7190                                             0.0s
 => => exporting manifest list sha256:ced8846ff5d82376a1b873d76f5c018e37da24ecae5892eba6c8500aa5ea6311                                                    0.0s
 => => naming to docker.io/library/homework-follower-1:latest                                                                                             0.0s
 => => unpacking to docker.io/library/homework-follower-1:latest                                                                                          0.0s
 => [master] exporting to image                                                                                                                           0.1s
 => => exporting layers                                                                                                                                   0.0s
 => => exporting manifest sha256:cbe3f17f697929c7e7c37a29c7c8b280ed4bd629e6bd85635112b865a79e282c                                                         0.0s
 => => exporting config sha256:a98a2b3b49ed6fc0e6b3e8c1a11c1ad32c5ee27177819eb6246ce93821171ee3                                                           0.0s
 => => exporting attestation manifest sha256:0b8565aeaa3dcbf7b99ac6b5be901be9dbbb017b31bbc972f46475832887b407                                             0.0s
 => => exporting manifest list sha256:7ca57850e46aa9bb11ce63b1fcab0c040cae5b33b122221a79a18d3b41e41522                                                    0.0s
 => => naming to docker.io/library/homework-master:latest                                                                                                 0.0s
 => => unpacking to docker.io/library/homework-master:latest                                                                                              0.0s
 => [follower-2] exporting to image                                                                                                                       0.1s
 => => exporting layers                                                                                                                                   0.0s
 => => exporting manifest sha256:08f22e1b89c37c6cbfba8cece81d2bc280f0a2b20fef99c47071530ec1189136                                                         0.0s
 => => exporting config sha256:a993cbc90eaaaf142ac3298d2d556e965d30a4ba37d255b1187a9875404b99fd                                                           0.0s
 => => exporting attestation manifest sha256:fe9bdb022e3f50f28c7af03b5a3861f8235420141679199d08f82fff782fcca2                                             0.0s
 => => exporting manifest list sha256:245d42d4d862551d26bbbc899ff03457a854183c326c65699b5ae4bafbc42919                                                    0.0s
 => => naming to docker.io/library/homework-follower-2:latest                                                                                             0.0s
 => => unpacking to docker.io/library/homework-follower-2:latest                                                                                          0.0s
 => [follower-1] resolving provenance for metadata file                                                                                                   0.0s
 => [follower-2] resolving provenance for metadata file                                                                                                   0.0s
 => [master] resolving provenance for metadata file                                                                                                       0.0s
[+] Running 6/6
 ✔ homework-follower-1              Built                                                                                                                 0.0s 
 ✔ homework-follower-2              Built                                                                                                                 0.0s 
 ✔ homework-master                  Built                                                                                                                 0.0s 
 ✔ Container homework-follower-2-1  Recreated                                                                                                             0.1s 
 ✔ Container homework-follower-1-1  Recreated                                                                                                             0.1s 
 ✔ Container homework-master-1      Recreated                                                                                                             0.4s 
Attaching to follower-1-1, follower-2-1, master-1
follower-2-1  | 2025-12-03 22:40:49,505 - __main__ - INFO - Secondary server follower-2 initialized on a273c41edf18:8051
follower-1-1  | 2025-12-03 22:40:49,505 - __main__ - INFO - Secondary server follower-1 initialized on a37351ef03bb:8051
follower-1-1  | INFO:     Started server process [1]
follower-1-1  | INFO:     Waiting for application startup.
follower-1-1  | INFO:     Application startup complete.
follower-2-1  | INFO:     Started server process [1]
follower-2-1  | INFO:     Waiting for application startup.
follower-2-1  | INFO:     Application startup complete.
follower-1-1  | INFO:     Uvicorn running on http://a37351ef03bb:8051 (Press CTRL+C to quit)
follower-2-1  | INFO:     Uvicorn running on http://a273c41edf18:8051 (Press CTRL+C to quit)
master-1      | 2025-12-03 22:40:49,620 - __main__ - INFO - Heartbeat worker started
master-1      | 2025-12-03 22:40:49,621 - __main__ - INFO - Heartbeat mechanism started with interval 5.0s
master-1      | 2025-12-03 22:40:49,627 - __main__ - INFO - Master server initialized on 7ad2968a8374:8051
master-1      | 2025-12-03 22:40:49,627 - __main__ - INFO - Registered secondaries: [<base.Node object at 0xffff890d3b90>, <base.Node object at 0xffff88c9a4d0>]
follower-1-1  | INFO:     172.18.0.4:59616 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:58340 - "GET /health HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:40:49,638 - __main__ - INFO - Quorum is satisfied!
master-1      | INFO:     Started server process [1]
master-1      | INFO:     Waiting for application startup.
master-1      | INFO:     Application startup complete.
master-1      | INFO:     Uvicorn running on http://7ad2968a8374:8051 (Press CTRL+C to quit)
follower-1-1  | INFO:     172.18.0.4:38206 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:58242 - "GET /health HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:40:59,556 - __main__ - INFO - Received message 1 'msg1' with write_concern=1
master-1      | 2025-12-03 22:40:59,557 - __main__ - INFO - Message 1 'msg1' added successfully.
master-1      | 2025-12-03 22:40:59,557 - __main__ - INFO - Replication started...
master-1      | 2025-12-03 22:40:59,557 - __main__ - INFO - Starting replication with write_concern=1
master-1      | 2025-12-03 22:40:59,557 - __main__ - INFO - Replicating message 1 'msg1' to secondary 1: http://follower-1:8051
master-1      | 2025-12-03 22:40:59,559 - __main__ - INFO - Replicating message 1 'msg1' to secondary 2: http://follower-2:8051
master-1      | 2025-12-03 22:40:59,560 - __main__ - INFO - Write concern satisfied: 1/1
master-1      | 2025-12-03 22:40:59,560 - __main__ - INFO - Replication took 0.0 seconds
follower-1-1  | 2025-12-03 22:40:59,562 - __main__ - INFO - Replicating message 1 'msg1'
follower-1-1  | 2025-12-03 22:40:59,562 - __main__ - INFO - Processing replication with 5.00s delay...
master-1      | /app/master.py:85: RuntimeWarning: coroutine 'as_completed.<locals>._wait_for_one' was never awaited
master-1      |   replication_success = await self._replicate(message, write_concern)
master-1      | RuntimeWarning: Enable tracemalloc to get the object allocation traceback
master-1      | 2025-12-03 22:40:59,566 - __main__ - INFO - Replication finished...
master-1      | INFO:     172.18.0.1:60260 - "POST /add HTTP/1.1" 200 OK
follower-1-1  | INFO:     172.18.0.4:38218 - "GET /health HTTP/1.1" 200 OK
follower-1-1  | 2025-12-03 22:41:04,567 - __main__ - INFO - Message 1 'msg1' replicated successfully.
follower-1-1  | INFO:     172.18.0.4:38210 - "POST /replicate HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:04,571 - __main__ - INFO - Message 1 'msg1' successfully replicated to secondary 1.
master-1      | 2025-12-03 22:41:04,692 - __main__ - WARNING - Heartbeat failure for http://follower-2:8051: Status -> Suspected (failures: 1)
master-1      | 2025-12-03 22:41:05,410 - __main__ - INFO - Received message 2 'msg2' with write_concern=2
master-1      | 2025-12-03 22:41:05,410 - __main__ - INFO - Message 2 'msg2' added successfully.
master-1      | 2025-12-03 22:41:05,410 - __main__ - INFO - Replication started...
master-1      | 2025-12-03 22:41:05,410 - __main__ - INFO - Starting replication with write_concern=2
master-1      | 2025-12-03 22:41:05,411 - __main__ - INFO - Replicating message 2 'msg2' to secondary 1: http://follower-1:8051
master-1      | 2025-12-03 22:41:05,411 - __main__ - INFO - Replicating message 2 'msg2' to secondary 2: http://follower-2:8051
follower-1-1  | 2025-12-03 22:41:05,413 - __main__ - INFO - Replicating message 2 'msg2'
follower-1-1  | 2025-12-03 22:41:05,413 - __main__ - INFO - Processing replication with 5.00s delay...
follower-1-1  | INFO:     172.18.0.4:56572 - "GET /health HTTP/1.1" 200 OK
follower-1-1  | 2025-12-03 22:41:10,422 - __main__ - INFO - Message 2 'msg2' replicated successfully.
follower-1-1  | INFO:     172.18.0.4:56566 - "POST /replicate HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:10,424 - __main__ - INFO - Message 2 'msg2' successfully replicated to secondary 1.
master-1      | 2025-12-03 22:41:10,425 - __main__ - INFO - Successful replications: 2/2
master-1      | 2025-12-03 22:41:10,425 - __main__ - INFO - Write concern satisfied: 2/2
master-1      | 2025-12-03 22:41:10,425 - __main__ - INFO - Replication took 5.01 seconds
master-1      | 2025-12-03 22:41:10,425 - __main__ - INFO - Replication finished...
master-1      | INFO:     172.18.0.1:61066 - "POST /add HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:12,329 - __main__ - INFO - Received message 3 'msg3' with write_concern=3
master-1      | 2025-12-03 22:41:12,329 - __main__ - INFO - Message 3 'msg3' added successfully.
master-1      | 2025-12-03 22:41:12,330 - __main__ - INFO - Replication started...
master-1      | 2025-12-03 22:41:12,330 - __main__ - INFO - Starting replication with write_concern=3
master-1      | 2025-12-03 22:41:12,331 - __main__ - INFO - Replicating message 3 'msg3' to secondary 1: http://follower-1:8051
master-1      | 2025-12-03 22:41:12,332 - __main__ - INFO - Replicating message 3 'msg3' to secondary 2: http://follower-2:8051
follower-1-1  | 2025-12-03 22:41:12,333 - __main__ - INFO - Replicating message 3 'msg3'
follower-1-1  | 2025-12-03 22:41:12,333 - __main__ - INFO - Processing replication with 5.00s delay...
follower-1-1  | 2025-12-03 22:41:17,342 - __main__ - INFO - Message 3 'msg3' replicated successfully.
follower-1-1  | INFO:     172.18.0.4:56588 - "POST /replicate HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:17,345 - __main__ - INFO - Message 3 'msg3' successfully replicated to secondary 1.
master-1      | 2025-12-03 22:41:17,346 - __main__ - INFO - Successful replications: 2/3
master-1      | 2025-12-03 22:41:19,561 - __main__ - ERROR - Timeout replicating message 1 'msg1' to secondary 2 (http://follower-2:8051): HTTPConnectionPool(host='follower-2', port=8051): Read timed out. (read timeout=20)
master-1      | 2025-12-03 22:41:19,561 - __main__ - INFO - Waiting 2.28 seconds before retrying...
follower-1-1  | INFO:     172.18.0.4:50278 - "GET /health HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:21,843 - __main__ - INFO - Retry replication of message 1 'msg1' to secondary 2: http://follower-2:8051 (attempt 1)
master-1      | 2025-12-03 22:41:21,844 - __main__ - WARNING - Skipping replication of message 1 'msg1'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:21,844 - __main__ - INFO - Waiting 4.80 seconds before retrying...
master-1      | 2025-12-03 22:41:25,439 - __main__ - ERROR - Timeout replicating message 2 'msg2' to secondary 2 (http://follower-2:8051): HTTPConnectionPool(host='follower-2', port=8051): Read timed out. (read timeout=20)
master-1      | 2025-12-03 22:41:25,441 - __main__ - INFO - Waiting 2.60 seconds before retrying...
master-1      | 2025-12-03 22:41:26,082 - __main__ - INFO - Received message 4 'msg4' with write_concern=1
master-1      | 2025-12-03 22:41:26,082 - __main__ - INFO - Message 4 'msg4' added successfully.
master-1      | 2025-12-03 22:41:26,082 - __main__ - INFO - Replication started...
master-1      | 2025-12-03 22:41:26,082 - __main__ - INFO - Starting replication with write_concern=1
master-1      | 2025-12-03 22:41:26,085 - __main__ - INFO - Replicating message 4 'msg4' to secondary 1: http://follower-1:8051
master-1      | 2025-12-03 22:41:26,089 - __main__ - WARNING - Skipping replication of message 4 'msg4'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:26,090 - __main__ - INFO - Waiting 1.10 seconds before retrying...
master-1      | 2025-12-03 22:41:26,090 - __main__ - INFO - Write concern satisfied: 1/1
master-1      | 2025-12-03 22:41:26,090 - __main__ - INFO - Replication took 0.01 seconds
master-1      | 2025-12-03 22:41:26,092 - __main__ - INFO - Replication finished...
master-1      | INFO:     172.18.0.1:62502 - "POST /add HTTP/1.1" 200 OK
follower-1-1  | 2025-12-03 22:41:26,097 - __main__ - INFO - Replicating message 4 'msg4'
follower-1-1  | 2025-12-03 22:41:26,098 - __main__ - INFO - Processing replication with 5.00s delay...
master-1      | 2025-12-03 22:41:26,652 - __main__ - INFO - Retry replication of message 1 'msg1' to secondary 2: http://follower-2:8051 (attempt 2)
master-1      | 2025-12-03 22:41:26,654 - __main__ - WARNING - Skipping replication of message 1 'msg1'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:26,654 - __main__ - INFO - Waiting 5.45 seconds before retrying...
master-1      | 2025-12-03 22:41:27,190 - __main__ - INFO - Retry replication of message 4 'msg4' to secondary 2: http://follower-2:8051 (attempt 1)
master-1      | 2025-12-03 22:41:27,191 - __main__ - WARNING - Skipping replication of message 4 'msg4'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:27,191 - __main__ - INFO - Waiting 0.86 seconds before retrying...
master-1      | 2025-12-03 22:41:28,049 - __main__ - INFO - Retry replication of message 2 'msg2' to secondary 2: http://follower-2:8051 (attempt 1)
master-1      | 2025-12-03 22:41:28,049 - __main__ - WARNING - Skipping replication of message 2 'msg2'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:28,049 - __main__ - INFO - Waiting 4.70 seconds before retrying...
master-1      | 2025-12-03 22:41:28,050 - __main__ - INFO - Retry replication of message 4 'msg4' to secondary 2: http://follower-2:8051 (attempt 2)
master-1      | 2025-12-03 22:41:28,050 - __main__ - WARNING - Skipping replication of message 4 'msg4'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:28,050 - __main__ - INFO - Waiting 9.38 seconds before retrying...
follower-1-1  | INFO:     172.18.0.4:39716 - "GET /health HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:29,977 - __main__ - INFO - Retrieved 4 messages from master: ['msg1', 'msg2', 'msg3', 'msg4']
master-1      | INFO:     172.18.0.1:62502 - "GET /messages HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:31,104 - __main__ - INFO - Message 4 'msg4' successfully replicated to secondary 1.
follower-1-1  | 2025-12-03 22:41:31,102 - __main__ - INFO - Message 4 'msg4' replicated successfully.
follower-1-1  | INFO:     172.18.0.4:39712 - "POST /replicate HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:32,104 - __main__ - INFO - Retry replication of message 1 'msg1' to secondary 2: http://follower-2:8051 (attempt 3)
master-1      | 2025-12-03 22:41:32,105 - __main__ - WARNING - Skipping replication of message 1 'msg1'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:32,105 - __main__ - INFO - Waiting 30.13 seconds before retrying...
follower-1-1  | 2025-12-03 22:41:32,208 - __main__ - INFO - Retrieved 4 replicated messages: ['msg1', 'msg2', 'msg3', 'msg4']
follower-1-1  | INFO:     172.18.0.1:55396 - "GET /messages HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:32,359 - __main__ - ERROR - Timeout replicating message 3 'msg3' to secondary 2 (http://follower-2:8051): HTTPConnectionPool(host='follower-2', port=8051): Read timed out. (read timeout=20)
master-1      | 2025-12-03 22:41:32,359 - __main__ - INFO - Waiting 3.22 seconds before retrying...
master-1      | 2025-12-03 22:41:32,762 - __main__ - INFO - Retry replication of message 2 'msg2' to secondary 2: http://follower-2:8051 (attempt 2)
master-1      | 2025-12-03 22:41:32,763 - __main__ - WARNING - Skipping replication of message 2 'msg2'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:32,764 - __main__ - INFO - Waiting 5.22 seconds before retrying...
master-1      | 2025-12-03 22:41:35,588 - __main__ - INFO - Retry replication of message 3 'msg3' to secondary 2: http://follower-2:8051 (attempt 1)
master-1      | 2025-12-03 22:41:35,588 - __main__ - WARNING - Skipping replication of message 3 'msg3'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:35,588 - __main__ - INFO - Waiting 0.55 seconds before retrying...
master-1      | 2025-12-03 22:41:36,144 - __main__ - INFO - Retry replication of message 3 'msg3' to secondary 2: http://follower-2:8051 (attempt 2)
master-1      | 2025-12-03 22:41:36,144 - __main__ - WARNING - Skipping replication of message 3 'msg3'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:36,144 - __main__ - INFO - Waiting 4.39 seconds before retrying...
master-1      | 2025-12-03 22:41:37,432 - __main__ - INFO - Retry replication of message 4 'msg4' to secondary 2: http://follower-2:8051 (attempt 3)
master-1      | 2025-12-03 22:41:37,433 - __main__ - WARNING - Skipping replication of message 4 'msg4'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:37,433 - __main__ - INFO - Waiting 20.37 seconds before retrying...
master-1      | 2025-12-03 22:41:37,982 - __main__ - INFO - Retry replication of message 2 'msg2' to secondary 2: http://follower-2:8051 (attempt 3)
master-1      | 2025-12-03 22:41:37,982 - __main__ - WARNING - Skipping replication of message 2 'msg2'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:37,982 - __main__ - INFO - Waiting 1.56 seconds before retrying...
master-1      | 2025-12-03 22:41:39,544 - __main__ - INFO - Retry replication of message 2 'msg2' to secondary 2: http://follower-2:8051 (attempt 4)
master-1      | 2025-12-03 22:41:39,544 - __main__ - WARNING - Skipping replication of message 2 'msg2'  to secondary 2 (http://follower-2:8051): Status is Unhealthy
master-1      | 2025-12-03 22:41:39,544 - __main__ - INFO - Waiting 31.84 seconds before retrying...
follower-1-1  | INFO:     172.18.0.4:52446 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | 2025-12-03 22:41:39,888 - __main__ - INFO - Replicating message 1 'msg1'
follower-2-1  | 2025-12-03 22:41:39,889 - __main__ - INFO - Processing replication with 10.00s delay...
follower-2-1  | INFO:     172.18.0.4:58260 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | 2025-12-03 22:41:39,893 - __main__ - INFO - Replicating message 2 'msg2'
follower-2-1  | 2025-12-03 22:41:39,893 - __main__ - INFO - Processing replication with 10.00s delay...
follower-2-1  | INFO:     172.18.0.4:33182 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | 2025-12-03 22:41:39,894 - __main__ - INFO - Replicating message 3 'msg3'
follower-2-1  | 2025-12-03 22:41:39,894 - __main__ - INFO - Processing replication with 10.00s delay...
follower-2-1  | INFO:     172.18.0.4:59040 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:56486 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | 2025-12-03 22:41:39,896 - __main__ - INFO - Retrieved 0 replicated messages: []
follower-2-1  | INFO:     172.18.0.1:64902 - "GET /messages HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:47496 - "GET /health HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:39,905 - __main__ - INFO - Heartbeat success for http://follower-2:8051: Suspected
master-1      | 2025-12-03 22:41:40,539 - __main__ - INFO - Retry replication of message 3 'msg3' to secondary 2: http://follower-2:8051 (attempt 3)
master-1      | 2025-12-03 22:41:40,539 - __main__ - INFO - Replicating message 3 'msg3' to secondary 2: http://follower-2:8051
follower-2-1  | 2025-12-03 22:41:40,541 - __main__ - INFO - Replicating message 3 'msg3'
follower-2-1  | 2025-12-03 22:41:40,541 - __main__ - INFO - Processing replication with 10.00s delay...
follower-1-1  | INFO:     172.18.0.4:49250 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:53844 - "GET /health HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:44,939 - __main__ - INFO - Heartbeat success for http://follower-2:8051: Healthy
follower-2-1  | 2025-12-03 22:41:49,893 - __main__ - INFO - Message 1 'msg1' replicated successfully.
follower-2-1  | 2025-12-03 22:41:49,895 - __main__ - INFO - Message 2 'msg2' replicated successfully.
follower-2-1  | 2025-12-03 22:41:49,895 - __main__ - INFO - Message 3 'msg3' replicated successfully.
follower-1-1  | INFO:     172.18.0.4:49258 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:53854 - "GET /health HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:50,553 - __main__ - INFO - Message 3 'msg3' successfully replicated to secondary 2.
master-1      | 2025-12-03 22:41:50,555 - __main__ - INFO - Successful replications: 3/3
follower-2-1  | INFO:     172.18.0.4:47498 - "POST /replicate HTTP/1.1" 200 OK
follower-2-1  | 2025-12-03 22:41:50,544 - __main__ - INFO - Message 3 'msg3' was not added (duplicate)
master-1      | 2025-12-03 22:41:50,555 - __main__ - WARNING - Write concern not satisfied: 3/3
master-1      | 2025-12-03 22:41:50,555 - __main__ - INFO - Replication finished...
master-1      | INFO:     172.18.0.1:61066 - "POST /add HTTP/1.1" 200 OK
master-1      | INFO:     172.18.0.1:61066 - "GET /messages HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:52,522 - __main__ - INFO - Retrieved 4 messages from master: ['msg1', 'msg2', 'msg3', 'msg4']
follower-1-1  | 2025-12-03 22:41:54,396 - __main__ - INFO - Retrieved 4 replicated messages: ['msg1', 'msg2', 'msg3', 'msg4']
follower-1-1  | INFO:     172.18.0.1:57074 - "GET /messages HTTP/1.1" 200 OK
follower-1-1  | INFO:     172.18.0.4:48984 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:48280 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | 2025-12-03 22:41:56,345 - __main__ - INFO - Retrieved 3 replicated messages: ['msg1', 'msg2', 'msg3']
follower-2-1  | INFO:     172.18.0.1:63490 - "GET /messages HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:41:57,814 - __main__ - INFO - Retry replication of message 4 'msg4' to secondary 2: http://follower-2:8051 (attempt 4)
master-1      | 2025-12-03 22:41:57,814 - __main__ - INFO - Replicating message 4 'msg4' to secondary 2: http://follower-2:8051
follower-2-1  | 2025-12-03 22:41:57,820 - __main__ - INFO - Replicating message 4 'msg4'
follower-2-1  | 2025-12-03 22:41:57,820 - __main__ - INFO - Processing replication with 10.00s delay...
follower-1-1  | INFO:     172.18.0.4:48988 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:48298 - "GET /health HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:42:02,235 - __main__ - INFO - Retry replication of message 1 'msg1' to secondary 2: http://follower-2:8051 (attempt 4)
master-1      | 2025-12-03 22:42:02,236 - __main__ - INFO - Replicating message 1 'msg1' to secondary 2: http://follower-2:8051
follower-2-1  | 2025-12-03 22:42:02,247 - __main__ - INFO - Replicating message 1 'msg1'
follower-2-1  | 2025-12-03 22:42:02,248 - __main__ - INFO - Processing replication with 10.00s delay...


follower-2-1  | INFO:     172.18.0.4:49180 - "GET /health HTTP/1.1" 200 OK
follower-1-1  | INFO:     172.18.0.4:41228 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | 2025-12-03 22:42:07,823 - __main__ - INFO - Message 4 'msg4' replicated successfully.
follower-2-1  | INFO:     172.18.0.4:48294 - "POST /replicate HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:42:07,828 - __main__ - INFO - Message 4 'msg4' successfully replicated to secondary 2.
follower-1-1  | INFO:     172.18.0.4:41238 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:49196 - "GET /health HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:42:11,392 - __main__ - INFO - Retry replication of message 2 'msg2' to secondary 2: http://follower-2:8051 (attempt 5)
master-1      | 2025-12-03 22:42:11,392 - __main__ - INFO - Replicating message 2 'msg2' to secondary 2: http://follower-2:8051
follower-2-1  | 2025-12-03 22:42:11,396 - __main__ - INFO - Replicating message 2 'msg2'
follower-2-1  | 2025-12-03 22:42:11,396 - __main__ - INFO - Processing replication with 10.00s delay...
follower-2-1  | 2025-12-03 22:42:11,743 - __main__ - INFO - Retrieved 4 replicated messages: ['msg1', 'msg2', 'msg3', 'msg4']
follower-2-1  | INFO:     172.18.0.1:63936 - "GET /messages HTTP/1.1" 200 OK
follower-2-1  | 2025-12-03 22:42:12,253 - __main__ - INFO - Message 1 'msg1' was not added (duplicate)
follower-2-1  | INFO:     172.18.0.4:48308 - "POST /replicate HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:42:12,257 - __main__ - INFO - Message 1 'msg1' successfully replicated to secondary 2.
follower-1-1  | INFO:     172.18.0.4:33484 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:56398 - "GET /health HTTP/1.1" 200 OK
follower-1-1  | INFO:     172.18.0.4:33496 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:56404 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | 2025-12-03 22:42:21,400 - __main__ - INFO - Message 2 'msg2' was not added (duplicate)
follower-2-1  | INFO:     172.18.0.4:49212 - "POST /replicate HTTP/1.1" 200 OK
master-1      | 2025-12-03 22:42:21,403 - __main__ - INFO - Message 2 'msg2' successfully replicated to secondary 2.
follower-1-1  | INFO:     172.18.0.4:51790 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:54300 - "GET /health HTTP/1.1" 200 OK
follower-1-1  | INFO:     172.18.0.4:51800 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:54308 - "GET /health HTTP/1.1" 200 OK
follower-1-1  | INFO:     172.18.0.4:33738 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:36082 - "GET /health HTTP/1.1" 200 OK
follower-1-1  | INFO:     172.18.0.4:33740 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:36096 - "GET /health HTTP/1.1" 200 OK
follower-1-1  | INFO:     172.18.0.4:41628 - "GET /health HTTP/1.1" 200 OK
follower-2-1  | INFO:     172.18.0.4:43510 - "GET /health HTTP/1.1" 200 OK